---
layout: layouts/base.liquid
pagination:
  data: cities
  size: 1
  alias: city
permalink: "/cities/{{ city.name | slugify }}/"
eleventyComputed:
  title: "{{ city.name }}, {{ city.country }}"
---

<div class="city-header">
  <h1>{{ city.name }}</h1>
  <p class="country-link">
    <a href="/countries/{{ city.country | slugify }}/">{{ city.country }}</a>
  </p>
</div>

{% if city.dishes.size > 0 %}
  <div class="image-grid">
    {% for dish_id in city.dishes %}
      {% assign dish = dishes | where: "id", dish_id | first %}
      {% if dish %}
        <a href="/dishes/{{ dish.id }}/" class="grid-item">
          {% if dish.image %}
            <img src="{{ dish.image }}" alt="{{ dish.name }}" loading="lazy">
          {% else %}
            <img src="/images/no_image_placeholder.svg" alt="{{ dish.name }}" loading="lazy">
          {% endif %}
          <div class="image-overlay">
            <span class="dish-name">{{ dish.name }}</span>
          </div>
        </a>
      {% endif %}
    {% endfor %}
  </div>
{% else %}
  <p>No dishes available for {{ city.name }} yet.</p>
{% endif %}

<nav class="dish-navigation">
  {% if pagination.href.previous %}
    <a href="{{ pagination.href.previous }}" class="nav-link prev">← Previous City</a>
  {% endif %}
  
  {% if pagination.href.next %}
    <a href="{{ pagination.href.next }}" class="nav-link next">Next City →</a>
  {% endif %}
</nav>